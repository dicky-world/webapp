(this.webpackJsonpdicky=this.webpackJsonpdicky||[]).push([[0],{24:function(e,a,t){e.exports=t(39)},38:function(e,a,t){},39:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),o=t(15),l=t.n(o),i=t(4),c=t(8),s=t(13),u=t(1),m=t.n(u),p=t(3),d=t(2);function f(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function E(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?f(t,!0).forEach((function(a){Object(d.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var g,v=Object(r.createContext)({dispatch:function(e){}}),b=localStorage.getItem("shared");b&&(g=JSON.parse(b));var h={display:{modal:""},env:{apiUrl:"https://api.dicky.world",imgUrl:"https://s3-eu-west-1.amazonaws.com/img.dicky.world/"},shared:g||{avatarId:"",bio:"",country:"",coverId:"",currency:"USD",dob:"2011-04-11",email:"",followers:0,following:0,fullName:"",gender:"other",language:"en",location:"",loggedIn:!1,username:"",warningMessage:"",webSite:""}},w=Object(r.createContext)({global:h}),y="SET_MODAL",O="SET_SHARED",j=function(e,a){switch(a.type){case"SET_SHARED":return localStorage.setItem("shared",JSON.stringify(a.value)),E({},e,{display:E({},e.display,{modal:""}),shared:a.value});case"SET_AVATAR":return E({},e,{shared:E({},e.shared,{avatar:a.value})});case"SET_EMAIL":return E({},e,{shared:E({},e.shared,{email:a.value})});case"SET_FULLNAME":return E({},e,{shared:E({},e.shared,{fullName:a.value})});case"SET_MODAL":return E({},e,{display:E({},e.display,{modal:a.value})});case"WARNING_MESSAGE":return E({},e,{shared:E({},e.shared,{warningMessage:a.value})});case"LOGGED_IN":return E({},e,{shared:E({},e.shared,{loggedIn:a.value,warningMessage:""})});default:return e}},S=function(){return n.a.createElement("footer",null,"Footer")},N=t(40),P=t(6),C=t.n(P),T=function(e){return n.a.createElement(n.a.Fragment,null,e.error&&n.a.createElement(N.a,{appear:!!e.error,classNames:"error",in:!!e.error,timeout:400},n.a.createElement("small",{className:"error"},e.error)))};function k(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function A(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?k(t,!0).forEach((function(a){Object(d.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var I=function(){var e=Object(r.useContext)(w).global,a=Object(r.useContext)(v).dispatch,t=Object(r.useState)({apiError:"",email:"",emailError:"",loading:!1,password:"",passwordError:""}),o=Object(i.a)(t,2),l=o[0],c=o[1],s=l.apiError,u=l.email,f=l.emailError,E=l.passwordError,g=l.loading,b=function(){var t=Object(p.a)(m.a.mark((function t(r){var n,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.email){t.next=9;break}return c((function(e){return A({},e,{loading:!0})})),t.next=4,fetch("".concat(e.env.apiUrl,"/login/reset-password"),{body:JSON.stringify({email:r.email}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});case 4:return n=t.sent,t.next=7,n.json();case 7:o=t.sent,200===n.status?(a({type:y,value:"resetsent"}),c((function(e){return A({},e,{loading:!1})}))):c((function(e){return A({},e,{apiError:o.error})}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(e){if("email"===e)return/\S+@\S+\.\S+/.test(u)?(c((function(e){return A({},e,{emailError:""})})),!0):(c((function(e){return A({},e,{emailError:"A valid email address is required."})})),!1)};return n.a.createElement("div",{className:"forgot"},n.a.createElement("h2",null,"Forgot password"),n.a.createElement("h3",null,"We will send you an email to reset your password."),n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),h("email")&&b({email:u})}},s&&n.a.createElement("div",{className:"error--api"},s),n.a.createElement("label",null,"Email"),n.a.createElement("input",{className:f&&"forgot--error",id:"email",onBlur:function(e){h(e.target.id)},onChange:function(e){e.persist();var a=e.target,t=a.id,r=a.value;"email"===t&&f&&h("email"),"password"===t&&E&&h("password"),c((function(e){return A({},e,Object(d.a)({},t,r))}))},placeholder:"Email address",type:"text",value:u}),n.a.createElement(T,{error:f}),n.a.createElement("small",{className:"forgot--right",onClick:function(){a({type:y,value:"login"})}},"Just Remebered?"),n.a.createElement(T,{error:E}),n.a.createElement("button",{color:"primary"},g?n.a.createElement("img",{src:C.a,alt:"loadingd",className:"loading"}):"Reset Password")))};function D(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function M(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?D(t,!0).forEach((function(a){Object(d.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var x=function(){var e=Object(r.useContext)(w).global,a=Object(r.useContext)(v).dispatch,t=Object(r.useState)({apiError:"",email:"",emailError:"",fullName:"",fullNameError:"",loading:!1,password:"",passwordError:""}),o=Object(i.a)(t,2),l=o[0],s=o[1],u=l.apiError,f=l.email,E=l.emailError,g=l.fullName,b=l.fullNameError,h=l.loading,y=l.password,j=l.passwordError,S=function(e){e.persist();var a=e.target,t=a.id,r=a.value;"email"===t&&E&&k("email"),"fullName"===t&&b&&k("fullName"),"password"===t&&j&&k("password"),s((function(e){return M({},e,Object(d.a)({},t,r))}))},N=function(){var t=Object(p.a)(m.a.mark((function t(r){var n,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.fullName&&r.email&&r.password)){t.next=10;break}return s((function(e){return M({},e,{loading:!0})})),t.next=4,fetch("".concat(e.env.apiUrl,"/join"),{body:JSON.stringify({email:r.email,fullName:r.fullName,password:r.password}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});case 4:return n=t.sent,t.next=7,n.json();case 7:o=t.sent,s((function(e){return M({},e,{loading:!1})})),200===n.status?(localStorage.setItem("jwtToken",o.jwtToken),a({type:O,value:o.shared}),window.location.href="/my/profile"):s((function(e){return M({},e,{apiError:o.error})}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),P=function(e){k(e.target.id)},k=function(e){return"fullName"===e?/^.{2,}$/.test(g)?(s((function(e){return M({},e,{fullNameError:""})})),!0):(s((function(e){return M({},e,{fullNameError:"2 charectors or longer"})})),!1):"email"===e?/\S+@\S+\.\S+/.test(f)?(s((function(e){return M({},e,{emailError:""})})),!0):(s((function(e){return M({},e,{emailError:"A valid email address is required."})})),!1):"password"===e?/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})/.test(y)?(s((function(e){return M({},e,{passwordError:""})})),!0):(s((function(e){return M({},e,{passwordError:"Your password must contain at least eight letters, and include a number and an uppercase letter"})})),!1):void 0};return n.a.createElement("div",{className:"join"},n.a.createElement("h2",null,"JOIN"),n.a.createElement("h3",null,"some subheading"),n.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=k("fullName"),t=k("email"),r=k("password");a&&t&&r&&N({email:l.email,fullName:l.fullName,password:l.password})}},u&&n.a.createElement("div",{className:"error--api"},u),n.a.createElement("label",null,"Name"),n.a.createElement("input",{className:b&&"join--error",id:"fullName",maxLength:70,onBlur:P,onChange:S,placeholder:"Full name",type:"text",value:g}),n.a.createElement(T,{error:b}),n.a.createElement("label",null,"Email"),n.a.createElement("input",{className:E&&"join--error",id:"email",maxLength:320,onBlur:P,onChange:S,placeholder:"Email address",type:"text",value:f}),n.a.createElement(T,{error:E}),n.a.createElement("label",null,"Password"),n.a.createElement("input",{className:j&&"join--error",id:"password",maxLength:70,onBlur:P,onChange:S,placeholder:"Create a password",type:"password",value:y}),n.a.createElement(T,{error:j}),n.a.createElement("button",{color:"primary"},h?n.a.createElement("img",{src:C.a,alt:"loading",className:"loading"}):"Join Now"),n.a.createElement("div",{className:"join--terms"},"By joining, you agree to our",n.a.createElement(c.b,{to:{pathname:"/terms"}}," Terms of Service")," and",n.a.createElement(c.b,{to:{pathname:"/terms"}}," Privacy Policy"))))};function B(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function L(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?B(t,!0).forEach((function(a){Object(d.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var U=function(){var e=Object(r.useContext)(w).global,a=Object(r.useContext)(v).dispatch,t=Object(r.useState)({apiError:"",email:"",emailError:"",loading:!1,password:"",passwordError:""}),o=Object(i.a)(t,2),l=o[0],c=o[1],s=l.apiError,u=l.email,f=l.emailError,E=l.password,g=l.passwordError,b=l.loading,h=function(e){e.persist();var a=e.target,t=a.id,r=a.value;"email"===t&&l.emailError&&N("email"),"password"===t&&l.passwordError&&N("password"),c((function(e){return L({},e,Object(d.a)({},t,r))}))},j=function(){var t=Object(p.a)(m.a.mark((function t(r){var n,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.email||!r.password){t.next=9;break}return c((function(e){return L({},e,{loading:!0})})),t.next=4,fetch("".concat(e.env.apiUrl,"/login"),{body:JSON.stringify({email:r.email,password:r.password}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});case 4:return n=t.sent,t.next=7,n.json();case 7:o=t.sent,200===n.status?(localStorage.setItem("jwtToken",o.jwtToken),a({type:O,value:o.shared}),c((function(e){return L({},e,{loading:!1})}))):c((function(e){return L({},e,{apiError:o.error})}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=function(e){N(e.target.id)},N=function(e){return"email"===e?/\S+@\S+\.\S+/.test(u)?(c((function(e){return L({},e,{emailError:""})})),!0):(c((function(e){return L({},e,{emailError:"A valid email address is required."})})),!1):"password"===e?/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})/.test(E)?(c((function(e){return L({},e,{passwordError:""})})),!0):(c((function(e){return L({},e,{passwordError:"Your password must contain at least eight letters, and include a number and an uppercase letter"})})),!1):void 0};return n.a.createElement("div",{className:"login"},n.a.createElement("h2",null,"Login"),n.a.createElement("h3",null,"welcome back"),n.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=N("email"),t=N("password");a&&t&&j({email:u,password:E})}},s&&n.a.createElement("div",{className:"error--api"},s),n.a.createElement("label",null,"Email"),n.a.createElement("input",{className:f&&"login--error",id:"email",onBlur:S,onChange:h,placeholder:"Email address",type:"text",value:u}),n.a.createElement(T,{error:f}),n.a.createElement("label",null,"Password"),n.a.createElement("input",{className:g&&"login--error",id:"password",onBlur:S,onChange:h,placeholder:"Create a password",type:"password",value:E}),n.a.createElement("small",{className:"login--right",onClick:function(){a({type:y,value:"forgot"})}},"Forgotten Password?"),n.a.createElement(T,{error:g}),n.a.createElement("button",{color:"primary"},b?n.a.createElement("img",{src:C.a,alt:"loadingd",className:"loading"}):"Login")))};function R(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function G(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?R(t,!0).forEach((function(a){Object(d.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):R(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var F=function(){var e=Object(r.useContext)(w).global,a=Object(r.useContext)(v).dispatch,t=Object(r.useState)({apiError:"",email:"",emailError:"",loading:!1,password:"",passwordError:""}),o=Object(i.a)(t,2),l=o[0],c=o[1],s=l.apiError,u=l.password,f=l.passwordError,E=l.loading,g=function(){var t=Object(p.a)(m.a.mark((function t(r){var n,o,l;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.password){t.next=10;break}return c((function(e){return G({},e,{loading:!0})})),n=localStorage.getItem("resetCode"),t.next=5,fetch("".concat(e.env.apiUrl,"/login/confirm-password"),{body:JSON.stringify({newPassword:r.password,resetCode:n}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});case 5:return o=t.sent,t.next=8,o.json();case 8:l=t.sent,200===o.status?(localStorage.removeItem("resetCode"),localStorage.setItem("jwtToken",l.jwtToken),a({type:O,value:l.shared}),a({type:y,value:""}),c((function(e){return G({},e,{loading:!1})})),window.location.href="/my/profile"):c((function(e){return G({},e,{apiError:l.error})}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(e){if("password"===e)return/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})/.test(u)?(c((function(e){return G({},e,{passwordError:""})})),!0):(c((function(e){return G({},e,{passwordError:"Your password must contain at least eight letters, and include a number and an uppercase letter"})})),!1)};return n.a.createElement("div",{className:"login"},n.a.createElement("h2",null,"Reset password"),n.a.createElement("h3",null,"enter a new password"),n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),b("password")&&g({password:l.password})}},s&&n.a.createElement("div",{className:"error--api"},s),n.a.createElement("label",null,"Password"),n.a.createElement("input",{className:f&&"login--error",id:"password",onBlur:function(e){b(e.target.id)},onChange:function(e){e.persist();var a=e.target,t=a.id,r=a.value;"password"===t&&l.passwordError&&b("password"),c((function(e){return G({},e,Object(d.a)({},t,r))}))},placeholder:"Create a password",type:"password",value:u}),n.a.createElement(T,{error:f}),n.a.createElement("button",{color:"primary"},E?n.a.createElement("img",{src:C.a,alt:"loadingd",className:"loading"}):"Save")))},K=function(){var e=Object(r.useContext)(v).dispatch;return setTimeout((function(){e({type:y,value:""})}),3e3),n.a.createElement("div",{className:"forgot"},n.a.createElement("h2",null,"Sent"),n.a.createElement("h3",null,"We will send a password reset link if this email is associated with an account."))},J=function(e){var a=Object(r.useContext)(v).dispatch,t=function(e){e.stopPropagation()},o="join"===e.screen?n.a.createElement("div",{className:"modal--modalCard",onClick:t},n.a.createElement(x,null)):"login"===e.screen?n.a.createElement("div",{className:"modal--modalCard",onClick:t},n.a.createElement(U,null)):"forgot"===e.screen?n.a.createElement("div",{className:"modal--modalCard",onClick:t},n.a.createElement(I,null)):"resetsent"===e.screen?n.a.createElement("div",{className:"modal--modalCard",onClick:t},n.a.createElement(K,null)):"resetpassword"===e.screen?n.a.createElement("div",{className:"modal--modalCard",onClick:t},n.a.createElement(F,null)):void 0;return n.a.createElement(N.a,{classNames:"modal",in:!!e.screen,timeout:300,unmountOnExit:!0},n.a.createElement("div",{className:"modal",onClick:function(){a({type:y,value:""})}},o))},H=function(e){var a=e.location?e.location.pathname.split("/")[2]:"";return n.a.createElement("div",null,n.a.createElement("aside",{className:"side-nav"},n.a.createElement(c.b,{to:{pathname:"/my/profile"}},n.a.createElement("div",{className:"side-nav--item ".concat("profile"===a&&"side-nav--selected")},"Edit Profile")),n.a.createElement(c.b,{to:{pathname:"/my/preferences"}},n.a.createElement("div",{className:"side-nav--item ".concat("preferences"===a&&"side-nav--selected")},"Preferences")),n.a.createElement(c.b,{to:{pathname:"/my/password"}},n.a.createElement("div",{className:"side-nav--item ".concat("password"===a&&"side-nav--selected")},"Password"))))};function Z(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function z(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Z(t,!0).forEach((function(a){Object(d.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var V=function(e){var a=Object(r.useContext)(w).global,t=Object(r.useContext)(v).dispatch,o=e.fullName.split(" ")[0],l=o.charAt(0).toLowerCase(),s=e.avatar?a.env.imgUrl+e.avatar:a.env.imgUrl+"initials/".concat(l,".png"),u=Object(r.useState)({dropDownStatus:!1}),m=Object(i.a)(u,2),p=m[0],d=m[1],f=function(){t({type:y,value:"login"})},E=function(){t({type:y,value:"join"})},g=function(){localStorage.clear(),t({type:"LOGGED_IN",value:!1})},b=function(){d((function(e){return z({},e,{dropDownStatus:!0})}))};window.onclick=function(e){"dropdown"!==e.target.id&&d((function(e){return z({},e,{dropDownStatus:!1})}))};var h=e.loggedIn?n.a.createElement("div",{className:"topnav--buttons",onClick:b,id:"dropdown"},n.a.createElement("div",{className:"topnav--avatar",id:"dropdown"},n.a.createElement("img",{src:s,alt:"your first name initial",id:"dropdown"}),n.a.createElement("div",{id:"dropdown"},o),n.a.createElement("div",{className:"topnav--dropdown ".concat(!0===p.dropDownStatus&&"topnav--dropdownon")},n.a.createElement(c.b,{to:{pathname:"/".concat(a.shared.username)}},n.a.createElement("div",{className:"topnav--item topnav--profile"},"Profile")),n.a.createElement("hr",null),n.a.createElement(c.b,{to:{pathname:"/my/profile"}},n.a.createElement("div",{className:"topnav--item"},"Settings")),n.a.createElement("div",{className:"topnav--item",onClick:g},"Logout")))):e.loggedIn?void 0:n.a.createElement("div",{className:"topnav--buttons"},n.a.createElement("button",{color:"primary",onClick:E},"Join Dicky"),n.a.createElement("button",{color:"secondary",onClick:f},"Login"));return n.a.createElement("nav",{className:"topnav"},n.a.createElement("div",{className:"topnav--container"},n.a.createElement("div",{className:"topnav--logo"},n.a.createElement(c.b,{to:"/"},"Logo")),n.a.createElement("div",{className:"topnav--search"}),h))},W=t(41),Y=function(e){var a,t=Object(r.useContext)(w).global,o=Object(r.useContext)(v).dispatch,l=function(){var e=Object(p.a)(m.a.mark((function e(){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:"WARNING_MESSAGE",value:"sent"}),e.next=3,fetch("".concat(t.env.apiUrl,"/join/resend-email"),{body:JSON.stringify({jwtToken:localStorage.getItem("jwtToken")}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});case 3:return a=e.sent,e.next=6,a.json();case 6:r=e.sent,200===a.status?(localStorage.setItem("jwtToken",r.jwtToken),o({type:O,value:r.shared}),setTimeout((function(){o({type:"WARNING_MESSAGE",value:"verify"})}),2e3)):console.log(r.error);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i="verify"===(a=e.message)?n.a.createElement("div",null,"Please confirm your email address. If you haven't received anything you can"," ",n.a.createElement("b",null,n.a.createElement(c.b,{to:{pathname:"/my/profile"}},"update your email"))," "," or ",n.a.createElement("b",{onClick:l},"resend confirmation"),"."):"offline"===a?n.a.createElement("div",null,"offline"):"sent"===a?n.a.createElement("div",null,"Email sent!"):void 0;return n.a.createElement(N.a,{in:!!e.message,timeout:300,unmountOnExit:!0,classNames:"warning"},n.a.createElement("div",{className:"warning"},n.a.createElement(W.a,null,n.a.createElement(N.a,{key:e.message||"",timeout:300,classNames:"warning-text"},n.a.createElement("div",{className:"warning-text"},i)))))},$=function(e){var a=Object(r.useContext)(w).global,t=Object(r.useContext)(v).dispatch;Object(r.useEffect)((function(){var r=function(){var e=Object(p.a)(m.a.mark((function e(r){var n,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}return e.next=3,fetch("".concat(a.env.apiUrl,"/my/location"),{body:JSON.stringify({jwtToken:localStorage.getItem("jwtToken"),location:r}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT"});case 3:return n=e.sent,e.next=6,n.json();case 6:o=e.sent,200===n.status?(localStorage.setItem("jwtToken",o.jwtToken),t({type:O,value:o.shared})):(localStorage.clear(),window.location.href="/");case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();e.location&&localStorage.getItem("jwtToken")&&r(e.location.pathname)}),[t,a.env.apiUrl,e.location]);var o=!1,l=e.location?e.location.pathname.split("/")[1]:"";!["my"].includes(l)||a.shared.loggedIn&&localStorage.getItem("jwtToken")?o=!0:window.location.href="/";var i=["my"].includes(l)?n.a.createElement("div",{className:"layout--sidenav"},n.a.createElement(H,{location:e.location}),n.a.createElement("div",null,e.children)):n.a.createElement("div",null,e.children);return n.a.createElement("div",{className:"layout"},o&&n.a.createElement(n.a.Fragment,null,n.a.createElement("header",null,n.a.createElement(J,{screen:a.display.modal}),n.a.createElement(Y,{message:a.shared.warningMessage}),n.a.createElement(V,{loggedIn:a.shared.loggedIn,fullName:a.shared.fullName,avatar:a.shared.avatarId})),n.a.createElement("main",{className:"layout--main"},i)),n.a.createElement(S,null))};function _(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function Q(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?_(t,!0).forEach((function(a){Object(d.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var q=function(e){var a=Object(r.useContext)(w).global,t=Object(r.useContext)(v).dispatch,o=e.match.params.confirmationCode,l=Object(r.useState)({apiError:""}),c=Object(i.a)(l,2),s=c[0],u=c[1],d=s.apiError;return Object(r.useEffect)((function(){function r(){return(r=Object(p.a)(m.a.mark((function r(){var n,l;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch("".concat(a.env.apiUrl,"/join/confirm-email"),{body:JSON.stringify({confirmationCode:o}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});case 2:return n=r.sent,r.next=5,n.json();case 5:l=r.sent,200===n.status?(localStorage.setItem("jwtToken",l.jwtToken),localStorage.setItem("shared",JSON.stringify(l.shared)),t({type:O,value:l.shared}),e.history.push("/my/profile")):u((function(e){return Q({},e,{apiError:l.error})}));case 7:case"end":return r.stop()}}),r)})))).apply(this,arguments)}o&&function(){r.apply(this,arguments)}()}),[o,t,a.env.apiUrl,e.history]),n.a.createElement("div",{className:"page"},d&&n.a.createElement("div",{className:"error--api"},d))},X=function(){return n.a.createElement("section",null)};function ee(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function ae(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?ee(t,!0).forEach((function(a){Object(d.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var te=function(){var e=Object(r.useContext)(w).global,a=Object(r.useContext)(v).dispatch,t=Object(r.useState)({apiError:"",confirmPassword:"",confirmPasswordError:"",currentPassword:"",currentPasswordError:"",loading:!1,newPassword:"",newPasswordError:""}),o=Object(i.a)(t,2),l=o[0],c=o[1],s=l.apiError,u=l.confirmPassword,f=l.confirmPasswordError,E=l.currentPassword,g=l.currentPasswordError,b=l.newPassword,h=l.newPasswordError,j=function(e){e.persist();var a=e.target,t=a.name,r=a.value;"currentPassword"===t&&g&&P("currentPassword",E),"newPassword"===t&&h&&P("newPassword",b),"confirmPassword"===t&&f&&P("confirmPassword",u),c((function(e){return ae({},e,Object(d.a)({},t,r))}))},S=function(){var t=Object(p.a)(m.a.mark((function t(r){var n,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c((function(e){return ae({},e,{loading:!0})})),t.next=3,fetch("".concat(e.env.apiUrl,"/my/password"),{body:JSON.stringify({currentPassword:r.currentPassword,jwtToken:localStorage.getItem("jwtToken"),newPassword:r.newPassword}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});case 3:return n=t.sent,t.next=6,n.json();case 6:o=t.sent,c((function(e){return ae({},e,{loading:!1,apiError:""})})),200===n.status?(localStorage.setItem("jwtToken",o.jwtToken),a({type:O,value:o.shared}),c((function(e){return ae({},e,{confirmPassword:"",currentPassword:"",newPassword:""})}))):c((function(e){return ae({},e,{apiError:o.error})}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=function(e){e.target.value&&e.target.value.length>=1&&P(e.target.name,e.target.value)},P=function(e,a){if("confirmPassword"===e||"currentPassword"===e||"newPassword"===e)return/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})/.test(a)?(c((function(a){return ae({},a,Object(d.a)({},e+"Error",""))})),!0):(c((function(a){return ae({},a,Object(d.a)({},e+"Error","8+ charectors, and include 1: number, uppercase & special charector"))})),!1)};return n.a.createElement("span",{className:"page"},n.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=P("confirmPassword",u),t=P("currentPassword",E),r=P("newPassword",b);a&&t&&r&&(b===u?S({currentPassword:E,newPassword:b}):c((function(e){return ae({},e,{confirmPasswordError:"Passwords are not the same"})})))},className:"form"},n.a.createElement("h4",{className:"form--title"},"Change Password"),n.a.createElement("div",{className:"form--body"},n.a.createElement("div",null,"Password"),n.a.createElement("div",{className:"form--relative"},s&&n.a.createElement("div",{className:"error--api"},s),n.a.createElement("label",null,"Current Password",n.a.createElement("input",{autoFocus:!0,className:g&&"form--error",maxLength:70,name:"currentPassword",onBlur:N,onChange:j,type:"password",value:E}),n.a.createElement(T,{error:g})),n.a.createElement("small",{onClick:function(){a({type:y,value:"forgot"})},className:"form--link"},"Forgot your password?"),n.a.createElement("label",null,"New Password",n.a.createElement("input",{className:h&&"form--error",maxLength:70,name:"newPassword",onBlur:N,onChange:j,type:"password",value:b}),n.a.createElement(T,{error:h})),n.a.createElement("label",null,"Confirm Password",n.a.createElement("input",{className:f&&"form--error",maxLength:70,name:"confirmPassword",onBlur:N,onChange:j,type:"password",value:u}),n.a.createElement(T,{error:f})))),n.a.createElement("div",{className:"form--footer"},n.a.createElement("small",null),n.a.createElement("div",null,n.a.createElement("button",{color:"primary"},l.loading?n.a.createElement("img",{src:C.a,alt:"loading",className:"loading"}):"Save Changes")))))};function re(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function ne(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?re(t,!0).forEach((function(a){Object(d.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):re(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var oe=function(){var e=Object(r.useContext)(w).global,a=Object(r.useContext)(v).dispatch,t=Object(r.useState)({apiError:"",language:e.shared.language,currency:e.shared.currency,loading:!1}),o=Object(i.a)(t,2),l=o[0],c=o[1],s=l.apiError,u=l.language,f=l.currency,E=l.loading,g=function(e){e.persist();var a=e.target,t=a.name,r=a.value;c((function(e){return ne({},e,Object(d.a)({},t,r))}))},b=function(){var t=Object(p.a)(m.a.mark((function t(r){var n,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c((function(e){return ne({},e,{loading:!0})})),t.next=3,fetch("".concat(e.env.apiUrl,"/my/preferences"),{body:JSON.stringify({currency:r.currency,jwtToken:localStorage.getItem("jwtToken"),language:r.language}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});case 3:return n=t.sent,t.next=6,n.json();case 6:o=t.sent,c((function(e){return ne({},e,{loading:!1,apiError:""})})),200===n.status?(localStorage.setItem("jwtToken",o.jwtToken),a({type:O,value:o.shared})):c((function(e){return ne({},e,{apiError:o.error})}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return n.a.createElement("span",{className:"page"},n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),b({language:u,currency:f})},className:"form"},n.a.createElement("h4",{className:"form--title"},"Edit Preferences"),n.a.createElement("div",{className:"form--body"},n.a.createElement("div",null,"Localization"),n.a.createElement("div",{className:"form--relative"},s&&n.a.createElement("div",{className:"error--api"},s),n.a.createElement("label",null,"Language",n.a.createElement("select",{autoFocus:!0,name:"language",onChange:g,value:u},n.a.createElement("option",{value:"ca"},"Catal\xe0"),n.a.createElement("option",{value:"cs"},"\u010cesky"),n.a.createElement("option",{value:"da"},"Dansk"),n.a.createElement("option",{value:"de"},"Deutsch"),n.a.createElement("option",{value:"el"},"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac"),n.a.createElement("option",{value:"en"},"English"),n.a.createElement("option",{value:"es"},"Espa\xf1ol"),n.a.createElement("option",{value:"et"},"Eesti"),n.a.createElement("option",{value:"eu"},"Basque"),n.a.createElement("option",{value:"fil"},"Filipino"),n.a.createElement("option",{value:"fr"},"Fran\xe7ais"),n.a.createElement("option",{value:"id"},"Indonesian"),n.a.createElement("option",{value:"is"},"\xcdslenska"),n.a.createElement("option",{value:"it"},"Italiano"),n.a.createElement("option",{value:"lt"},"Lietuvi\u0161kai"),n.a.createElement("option",{value:"nl"},"Nederlands"),n.a.createElement("option",{value:"no"},"Norsk"),n.a.createElement("option",{value:"pl"},"Polski"),n.a.createElement("option",{value:"pt-br"},"Portugu\xeas (Br)"),n.a.createElement("option",{value:"pt"},"Portugu\xeas (Pt)"),n.a.createElement("option",{value:"ro"},"Rom\xe2n\u0103"),n.a.createElement("option",{value:"ru"},"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"),n.a.createElement("option",{value:"sk"},"Slovensky"),n.a.createElement("option",{value:"fi"},"Suomi"),n.a.createElement("option",{value:"sv"},"Svenska"),n.a.createElement("option",{value:"th"},"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22"),n.a.createElement("option",{value:"tr"},"T\xfcrk\xe7e"),n.a.createElement("option",{value:"ja"},"\u65e5\u672c\u8a9e"),n.a.createElement("option",{value:"zh-hans"},"\u7b80\u4f53\u4e2d\u6587"),n.a.createElement("option",{value:"zh-hant"},"\u7e41\u9ad4\u4e2d\u6587"),n.a.createElement("option",{value:"ko"},"\ud55c\uad6d\uc5b4"),n.a.createElement("option",{value:"sr"},"\u0421\u0440\u043f\u0441\u043a\u0438"),n.a.createElement("option",{value:"sr-latn"},"Srpski (Latinica)"))),n.a.createElement("label",null,"Currency",n.a.createElement("select",{name:"currency",onChange:g,value:f},n.a.createElement("option",{value:"AUD"},"Australian dollars ($)"),n.a.createElement("option",{value:"BHD"},"Bahrain dinars (BD)"),n.a.createElement("option",{value:"BTC"},"Bitcoin (\u0243)"),n.a.createElement("option",{value:"BRL"},"Brazil reals (R$)"),n.a.createElement("option",{value:"GBP"},"British pounds (\xa3)"),n.a.createElement("option",{value:"BND"},"Brunei dollars ($)"),n.a.createElement("option",{value:"CAD"},"Canadian dollars ($)"),n.a.createElement("option",{value:"CNY"},"Chinese yuan (\xa5)"),n.a.createElement("option",{value:"CZK"},"Czech koruny (K\u010d)"),n.a.createElement("option",{value:"DKK"},"Danish kroner (kr)"),n.a.createElement("option",{value:"EGP"},"Egyptian pounds (\xa3)"),n.a.createElement("option",{value:"EUR"},"Euros (\u20ac)"),n.a.createElement("option",{value:"HKD"},"Hong Kong dollars ($)"),n.a.createElement("option",{value:"HUF"},"Hungarian forints (Ft)"),n.a.createElement("option",{value:"INR"},"Indian rupees (\u20b9)"),n.a.createElement("option",{value:"IDR"},"Indonesian rupiahs (Rp)"),n.a.createElement("option",{value:"ILS"},"Israeli shekels (\u20aa)"),n.a.createElement("option",{value:"JPY"},"Japanese yen (\xa5)"),n.a.createElement("option",{value:"JOD"},"Jordanian dinars (JD)"),n.a.createElement("option",{value:"KZT"},"Kazakh tenge (\u043b\u0432)"),n.a.createElement("option",{value:"KWD"},"Kuwaiti dinars (K.D.)"),n.a.createElement("option",{value:"LTL"},"Lithuanian litai (Lt)"),n.a.createElement("option",{value:"MYR"},"Malaysian ringgits (RM)"),n.a.createElement("option",{value:"MXN"},"Mexican pesos ($)"),n.a.createElement("option",{value:"NZD"},"New Zealand dollars ($)"),n.a.createElement("option",{value:"NOK"},"Norwegian kroner (kr)"),n.a.createElement("option",{value:"PKR"},"Pakistan rupees (\u20a8)"),n.a.createElement("option",{value:"PHP"},"Philippine pesos (\u20b1)"),n.a.createElement("option",{value:"PLN"},"Polish zloty (z\u0142)"),n.a.createElement("option",{value:"QAR"},"Qatar riyals (\ufdfc)"),n.a.createElement("option",{value:"RON"},"Romanian leu (L)"),n.a.createElement("option",{value:"RUB"},"Russian rubles (\u0440\u0443\u0431)"),n.a.createElement("option",{value:"SAR"},"Saudi riyals (\ufdfc)"),n.a.createElement("option",{value:"RSD"},"Serbian dinars (\u0414\u0438\u043d.)"),n.a.createElement("option",{value:"SGD"},"Singapore dollars ($)"),n.a.createElement("option",{value:"ZAR"},"South African rands (R)"),n.a.createElement("option",{value:"KRW"},"South Korean won (\u20a9)"),n.a.createElement("option",{value:"SEK"},"Swedish kronor (kr)"),n.a.createElement("option",{value:"CHF"},"Swiss francs (CHF)"),n.a.createElement("option",{value:"TWD"},"Taiwan dollars (NT$)"),n.a.createElement("option",{value:"THB"},"Thai baht (\u0e3f)"),n.a.createElement("option",{value:"TRY"},"Turkish liras (\u20a4)"),n.a.createElement("option",{value:"USD"},"U.S. dollars ($)"),n.a.createElement("option",{value:"AED"},"United Arab Emirates dirhams (AED)"),n.a.createElement("option",{value:"VND"},"Vietnamese dong (\u20ab)"))))),n.a.createElement("div",{className:"form--footer"},n.a.createElement("small",null),n.a.createElement("div",null,n.a.createElement("button",{color:"primary"},E?n.a.createElement("img",{src:C.a,alt:"loading",className:"loading"}):"Save Changes")))))};function le(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function ie(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?le(t,!0).forEach((function(a){Object(d.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):le(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var ce=function(e){var a=Object(r.useContext)(v).dispatch,t=Object(r.useState)({isMe:e.isMe,placeholder:e.placeholder||"",resizeTo:e.resizeTo,saveImg:e.saveImg,signedUrl:e.signedUrl}),o=Object(i.a)(t,2),l=o[0],c=o[1],s=l.placeholder;Object(r.useEffect)((function(){c((function(a){return ie({},a,{placeholder:e.placeholder})}))}),[e.placeholder]);var u={};u=s.length<=51?{backgroundColor:"grey",backgroundSize:"cover",height:"300px",overflow:"hidden",width:"100%"}:{background:"url(".concat(s,") no-repeat center center"),backgroundColor:"grey",backgroundSize:"cover",height:"300px",overflow:"hidden",width:"100%"};var d=function(){var t=Object(p.a)(m.a.mark((function t(r){var n,o,l,i,c,s,u;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.signedUrl,{body:JSON.stringify({jwtToken:localStorage.getItem("jwtToken")}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});case 2:return n=t.sent,t.next=5,n.json();case 5:if(o=t.sent,200!==n.status){t.next=20;break}return l=o.signedUrl,t.next=10,fetch(l,{body:r,headers:{Accept:"application/json","Content-Type":"image/jpeg"},method:"PUT"});case 10:if(200!==(i=t.sent).status){t.next=20;break}return c="".concat(i.url.split("/")[4],"/").concat(i.url.split("/")[5].split("?")[0]),t.next=15,fetch(e.saveImg,{body:JSON.stringify({coverId:c,jwtToken:localStorage.getItem("jwtToken")}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});case 15:return s=t.sent,t.next=18,s.json();case 18:u=t.sent,a({type:O,value:u.shared});case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(e){if(-1===e.indexOf(";base64,")){var a=e.split(","),t=a[0].split(":")[1],r=a[1];return new Blob([r],{type:t})}for(var n=e.split(";base64,"),o=n[0].split(":")[1],l=window.atob(n[1]),i=l.length,c=new Uint8Array(i),s=0;s<i;++s)c[s]=l.charCodeAt(s);return new Blob([c],{type:o})};return n.a.createElement("div",{className:"cover",style:u},e.isMe&&n.a.createElement("label",{className:"cover--label"},n.a.createElement("span",{className:"cover--upload"},"Upload cover image"),n.a.createElement("input",{accept:"image/png, image/jpeg",id:"photo",name:"photo",onChange:function(e){if(e.currentTarget.files){var a=e.currentTarget.files[0],t=new FileReader;t.onload=function(e){var t=new Image;t.onload=function(){var e=Object(p.a)(m.a.mark((function e(a){var r,n,o,l,i,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=document.createElement("canvas")).width=900,r.height=300,(n=r.getContext("2d")).imageSmoothingEnabled=!1,o=t.width,l=t.height,l*=900/o,o=900,n.drawImage(t,0,0,o,l),i=r.toDataURL("image/jpeg"),c((function(e){return ie({},e,{placeholder:i,height:l,width:o})})),s=f(i),d(s);case 14:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.src=URL.createObjectURL(a)},t&&t.readAsDataURL(a)}},type:"file"})))},se={zhhans:{AX:"\u4e9a\u5170\u7fa4\u5c9b",AF:"\u963f\u5bcc\u6c57",AL:"\u963f\u5c14\u5df4\u5c3c\u4e9a",DZ:"\u963f\u5c14\u53ca\u5229\u4e9a",AS:"\u7f8e\u5c5e\u8428\u6469\u4e9a",AD:"\u5b89\u9053\u5c14",AO:"\u5b89\u54e5\u62c9",AI:"\u5b89\u572d\u62c9\u5c9b",AQ:"\u5357\u6781\u6d32",AG:"\u5b89\u63d0\u74dc\u548c\u5df4\u5e03\u8fbe",AR:"\u963f\u6839\u5ef7",AM:"\u4e9a\u7f8e\u5c3c\u4e9a",AW:"\u963f\u9c81\u5df4\u5c9b",AU:"\u6fb3\u5927\u5229\u4e9a",AT:"\u5965\u5730\u5229",AZ:"\u963f\u585e\u62dc\u7586",BS:"\u5df4\u54c8\u9a6c",BH:"\u5df4\u6797",BD:"\u5b5f\u52a0\u62c9\u56fd",BB:"\u5df4\u5df4\u591a\u65af",BY:"\u767d\u4fc4\u7f57\u65af",BE:"\u6bd4\u5229\u65f6",BZ:"\u4f2f\u5229\u5179",BJ:"\u8d1d\u5b81",BM:"\u767e\u6155\u5927",BT:"\u4e0d\u4e39",BO:"\u73bb\u5229\u7ef4\u4e9a",BA:"\u6ce2\u65af\u5c3c\u4e9a\u548c\u9ed1\u585e\u54e5\u7ef4\u90a3",BW:"\u535a\u8328\u74e6\u7eb3",BV:"\u5e03\u7ef4\u5c9b",BR:"\u5df4\u897f",IO:"\u82f1\u5c5e\u5370\u5ea6\u6d0b\u9886\u5730",BN:"\u6587\u83b1\u8fbe\u9c81\u8428\u5170\u56fd",BG:"\u4fdd\u52a0\u5229\u4e9a",BF:"\u5e03\u57fa\u7eb3\u6cd5\u7d22",BI:"\u5e03\u9686\u8fea",KH:"\u67ec\u57d4\u5be8",CM:"\u5580\u9ea6\u9686",CA:"\u52a0\u62ff\u5927",CV:"\u4f5b\u5f97\u89d2",KY:"\u5f00\u66fc\u7fa4\u5c9b",CF:"\u4e2d\u975e\u5171\u548c\u56fd",TD:"\u4e4d\u5f97",CL:"\u667a\u5229",CN:"\u4e2d\u56fd",CX:"\u5723\u8bde\u5c9b",CC:"\u79d1\u79d1\u65af\uff08\u57fa\u6797\uff09\u7fa4\u5c9b",CO:"\u54e5\u4f26\u6bd4\u4e9a",KM:"\u79d1\u6469\u7f57",CD:"\u521a\u679c\u6c11\u4e3b\u5171\u548c\u56fd\uff08\u74e6\u624e\u4f0a\u5c14\uff09",CG:"\u521a\u679c\u5171\u548c\u56fd",CK:"\u5e93\u514b\u7fa4\u5c9b",CR:"\u54e5\u65af\u8fbe\u9ece\u52a0",CI:"\u8c61\u7259\u6d77\u5cb8",HR:"\u514b\u7f57\u5730\u4e9a\uff08\u672c\u5730\u540d\u79f0\uff1aHrvatska)",CU:"\u53e4\u5df4",CY:"\u585e\u6d66\u8def\u65af",CZ:"\u6377\u514b\u5171\u548c\u56fd",DK:"\u4e39\u9ea6",DJ:"\u5409\u5e03\u5730",DM:"\u591a\u7c73\u5c3c\u52a0",DO:"\u591a\u660e\u5c3c\u52a0\u5171\u548c\u56fd",TL:"\u4e1c\u5e1d\u6c76",EC:"\u5384\u74dc\u591a\u5c14",EG:"\u57c3\u53ca",SV:"\u8428\u5c14\u74e6\u591a",GQ:"\u8d64\u9053\u51e0\u5185\u4e9a",ER:"\u5384\u7acb\u7279\u91cc\u4e9a",EE:"\u7231\u6c99\u5c3c\u4e9a",ET:"\u57c3\u585e\u4fc4\u6bd4\u4e9a",FK:"\u798f\u514b\u5170\u7fa4\u5c9b\uff08\u9a6c\u5c14\u7ef4\u7eb3\u65af\uff09",FO:"\u6cd5\u7f57\u7fa4\u5c9b",FJ:"\u6590\u6d4e",FI:"\u82ac\u5170",FR:"\u6cd5\u56fd",GF:"\u6cd5\u5c5e\u572d\u4e9a\u90a3",PF:"\u6cd5\u5c5e\u6ce2\u5229\u5c3c\u897f\u4e9a",TF:"\u6cd5\u5c5e\u5357\u90e8\u9886\u5730",GA:"\u52a0\u84ec",GM:"\u5188\u6bd4\u4e9a",GE:"\u4f50\u6cbb\u4e9a\u5dde",DE:"\u5fb7\u56fd",GH:"\u52a0\u7eb3",GI:"\u76f4\u5e03\u7f57\u9640",GR:"\u5e0c\u814a",GL:"\u683c\u9675\u5170",GD:"\u683c\u6797\u7eb3\u8fbe",GP:"\u74dc\u5fb7\u7f57\u666e\u5c9b",GU:"\u5173\u5c9b",GT:"\u5371\u5730\u9a6c\u62c9",GN:"\u51e0\u5185\u4e9a",GW:"\u51e0\u5185\u4e9a\u6bd4\u7ecd",GY:"\u572d\u4e9a\u90a3",HT:"\u6d77\u5730",HM:"\u8d6b\u5fb7\u5c9b\u548c\u9ea6\u514b\u5510\u7eb3\u7fa4\u5c9b",HN:"\u6d2a\u90fd\u62c9\u65af",HK:"\u9999\u6e2f",HU:"\u5308\u7259\u5229",IS:"\u51b0\u5c9b",IN:"\u5370\u5ea6",ID:"\u5370\u5c3c",IR:"\u4f0a\u6717\uff08\u4f0a\u65af\u5170\u5171\u548c\u56fd\uff09",IQ:"\u4f0a\u62c9\u514b",IE:"\u7231\u5c14\u5170",IL:"\u4ee5\u8272\u5217",IT:"\u610f\u5927\u5229",JM:"\u7259\u4e70\u52a0",JP:"\u65e5\u672c",JO:"\u7ea6\u65e6",KZ:"\u54c8\u8428\u514b\u65af\u5766",KE:"\u80af\u5c3c\u4e9a",KI:"\u57fa\u91cc\u5df4\u65af",KP:"\u671d\u9c9c",KR:"\u97e9\u56fd",KW:"\u79d1\u5a01\u7279",KG:"\u5409\u5c14\u5409\u65af\u65af\u5766",LA:"\u8001\u631d\u4eba\u6c11\u6c11\u4e3b\u5171\u548c\u56fd",LV:"\u62c9\u8131\u7ef4\u4e9a",LB:"\u9ece\u5df4\u5ae9",LS:"\u83b1\u7d22\u6258",LR:"\u5229\u6bd4\u91cc\u4e9a",LY:"\u963f\u62c9\u4f2f\u5229\u6bd4\u4e9a\u6c11\u4f17\u56fd",LI:"\u5217\u652f\u6566\u58eb\u767b",LT:"\u7acb\u9676\u5b9b",LU:"\u5362\u68ee\u5821",MO:"\u6fb3\u95e8",MK:"\u9a6c\u5176\u987f\uff0c\u524d\u5357\u65af\u62c9\u592b\u5171\u548c\u56fd",MG:"\u9a6c\u8fbe\u52a0\u65af\u52a0",MW:"\u9a6c\u62c9\u7ef4",MY:"\u9a6c\u6765\u897f\u4e9a",MV:"\u9a6c\u5c14\u4ee3\u592b",ML:"\u9a6c\u91cc",MT:"\u9a6c\u8033\u4ed6",MH:"\u9a6c\u7ecd\u5c14\u7fa4\u5c9b",MQ:"\u9a6c\u63d0\u5c3c\u514b\u5c9b",MR:"\u6bdb\u91cc\u5854\u5c3c\u4e9a",MU:"\u6bdb\u91cc\u6c42\u65af",YT:"\u9a6c\u7ea6\u7279",MX:"\u58a8\u897f\u54e5",FM:"\u5bc6\u514b\u7f57\u5c3c\u897f\u4e9a\u8054\u90a6",MD:"\u6469\u5c14\u591a\u74e6\u5171\u548c\u56fd",MC:"\u6469\u7eb3\u54e5",MN:"\u8499\u53e4",ME:"\u9ed1\u5c71\u5171\u548c\u56fd",MS:"\u8499\u7279\u585e\u62c9\u7279",MA:"\u6469\u6d1b\u54e5",MZ:"\u83ab\u6851\u6bd4\u514b",MM:"\u7f05\u7538",NA:"\u7eb3\u7c73\u6bd4\u4e9a",NR:"\u7459\u9c81",NP:"\u5c3c\u6cca\u5c14",NL:"\u8377\u5170",AN:"\u8377\u5c5e\u5b89\u7684\u5217\u65af",NC:"\u65b0\u5580\u91cc\u591a\u5c3c\u4e9a",NZ:"\u65b0\u897f\u5170",NI:"\u5c3c\u52a0\u62c9\u74dc",NE:"\u5c3c\u65e5\u5c14",NG:"\u5c3c\u65e5\u5229\u4e9a",NU:"\u7ebd\u57c3",NF:"\u8bfa\u798f\u514b\u5c9b",MP:"\u5317\u9a6c\u91cc\u4e9a\u7eb3\u7fa4\u5c9b",NO:"\u632a\u5a01",OM:"\u963f\u66fc",PK:"\u5df4\u57fa\u65af\u5766",PW:"\u5e15\u52b3",PS:"\u5df4\u52d2\u65af\u5766\u9886\u571f",PA:"\u5df4\u62ff\u9a6c",PG:"\u5df4\u5e03\u4e9a\u65b0\u51e0\u5185\u4e9a",PY:"\u5df4\u62c9\u572d",PE:"\u79d8\u9c81",PH:"\u83f2\u5f8b\u5bbe",PN:"\u76ae\u7279\u51ef\u6069",PL:"\u6ce2\u5170",PT:"\u8461\u8404\u7259",PR:"\u6ce2\u591a\u9ece\u5404",QA:"\u5361\u5854\u5c14",RE:"\u7559\u5c3c\u6c6a",RO:"\u7f57\u9a6c\u5c3c\u4e9a",RU:"\u4fc4\u7f57\u65af\u8054\u90a6",RW:"\u5362\u65fa\u8fbe",SH:"\u5723\u6d77\u4f26\u5a1c",KN:"\u5723\u57fa\u8328\u548c\u5c3c\u7ef4\u65af",LC:"\u5723\u5362\u897f\u4e9a",PM:"\u5723\u76ae\u57c3\u5c14\u548c\u5bc6\u514b\u9686\u7fa4\u5c9b",VC:"\u5723\u6587\u68ee\u7279\u548c\u683c\u6797\u7eb3\u4e01\u65af",WS:"\u8428\u6469\u4e9a",SM:"\u5723\u9a6c\u529b\u8bfa",ST:"\u5723\u591a\u7f8e\u548c\u666e\u6797\u897f\u6bd4",SA:"\u6c99\u7279\u963f\u62c9\u4f2f",SN:"\u585e\u5185\u52a0\u5c14",RS:"\u585e\u5c14\u7ef4\u4e9a",SC:"\u585e\u820c\u5c14",SL:"\u585e\u62c9\u5229\u6602",SG:"\u65b0\u52a0\u5761",SK:"\u65af\u6d1b\u4f10\u514b",SI:"\u65af\u6d1b\u6587\u5c3c\u4e9a",SB:"\u6240\u7f57\u95e8\u7fa4\u5c9b",SO:"\u7d22\u9a6c\u91cc",ZA:"\u5357\u975e",GS:"\u5357\u4e54\u6cbb\u4e9a\u5c9b\u548c\u5357\u6851\u5a01\u5947\u7fa4\u5c9b",SS:"\u5357\u82cf\u4e39",ES:"\u897f\u73ed\u7259",LK:"\u65af\u91cc\u5170\u5361",SD:"\u82cf\u4e39",SR:"\u82cf\u91cc\u5357",SJ:"\u65af\u74e6\u5c14\u5df4\u7fa4\u5c9b\u548c\u626c\u9a6c\u5ef6\u7fa4\u5c9b",SZ:"\u65af\u5a01\u58eb\u5170",SE:"\u745e\u5178",CH:"\u745e\u58eb",SY:"\u963f\u62c9\u4f2f\u53d9\u5229\u4e9a\u5171\u548c\u56fd",TW:"\u53f0\u6e7e",TJ:"\u5854\u5409\u514b\u65af\u5766",TZ:"\u5766\u6851\u5c3c\u4e9a\u8054\u5408\u5171\u548c\u56fd",TH:"\u6cf0\u56fd",TG:"\u591a\u54e5",TK:"\u6258\u514b\u52b3",TO:"\u6c64\u52a0",TT:"\u7279\u7acb\u5c3c\u8fbe\u548c\u591a\u5df4\u54e5",TN:"\u7a81\u5c3c\u65af",TR:"\u571f\u8033\u5176",TM:"\u571f\u5e93\u66fc\u65af\u5766",TC:"\u7279\u514b\u65af\u548c\u51ef\u79d1\u65af\u7fa4\u5c9b",TV:"\u56fe\u74e6\u5362",UG:"\u4e4c\u5e72\u8fbe",UA:"\u4e4c\u514b\u5170",AE:"\u963f\u62c9\u4f2f\u8054\u5408\u914b\u957f\u56fd",GB:"\u82f1\u56fd",US:"\u7f8e\u56fd",UM:"\u7f8e\u56fd\u672c\u571f\u5916\u5c0f\u5c9b\u5c7f",UY:"\u4e4c\u62c9\u572d",UZ:"\u4e4c\u5179\u522b\u514b\u65af\u5766",VU:"\u74e6\u52aa\u963f\u56fe",VA:"\u68b5\u8482\u5188\u57ce\u56fd\uff08\u6559\u5ef7\uff09",VE:"\u59d4\u5185\u745e\u62c9",VN:"\u8d8a\u5357",VG:"\u7ef4\u5c14\u4eac\u7fa4\u5c9b\uff08\u82f1\u56fd\uff09",VI:"\u7ef4\u5c14\u4eac\u7fa4\u5c9b\uff08\u7f8e\u56fd\uff09",WF:"\u74e6\u5229\u65af\u7fa4\u5c9b\u548c\u5bcc\u56fe\u7eb3\u7fa4\u5c9b",EH:"\u6492\u54c8\u62c9\u6c99\u6f20\u897f\u90e8",YE:"\u4e5f\u95e8",ZM:"\u8d5e\u6bd4\u4e9a",ZW:"\u6d25\u5df4\u5e03\u97e6"},en:{AX:"Aaland Islands",AF:"Afghanistan",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegowina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CD:"Congo, Democratic Republic Of (Was Zaire)",CG:"Congo, Republic Of",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia (Local Name: Hrvatska)",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",TL:"East Timor",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard And Mc Donald Islands",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"Korea, North",KR:"Korea, Republic Of",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macau",MK:"Macedonia, The Former Yugoslav Republic Of",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova, Republic Of",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And The Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And The South Sandwich Islands",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen Islands",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania, United Republic Of",TH:"Thailand",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States of America",UM:"United States Minor Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VA:"Vatican City State (Holy See)",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands (British)",VI:"Virgin Islands (U.S.)",WF:"Wallis And Futuna Islands",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"}};function ue(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function me(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?ue(t,!0).forEach((function(a){Object(d.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ue(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var pe=function(e){var a=Object(r.useContext)(w).global,t=Object(r.useContext)(v).dispatch,o=e.match.params.username,l=se[a.shared.language],c=Object(r.useState)({followLoading:!1,pageLoading:!0}),s=Object(i.a)(c,2),u=s[0],d=s[1],f=Object(r.useState)({avatarId:"",bio:"",canFollow:!0,country:"",coverId:"",followers:0,following:0,fullName:"",isMe:!1,loading:!0,webSite:""}),E=Object(i.a)(f,2),g=E[0],b=E[1],h=u.followLoading,O=u.pageLoading,j=g.avatarId,S=g.bio,N=g.canFollow,P=g.coverId,T=g.country,k=g.fullName,A=g.isMe,I=g.webSite,D=g.followers,M=g.following,x=function(){var e=Object(p.a)(m.a.mark((function e(t){var r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d((function(e){return me({},e,{followLoading:!0})})),e.next=3,fetch("".concat(a.env.apiUrl,"/user/").concat(t),{body:JSON.stringify({jwtToken:localStorage.getItem("jwtToken"),username:o}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});case 3:return r=e.sent,e.next=6,r.json();case 6:n=e.sent,200===r.status&&(d((function(e){return me({},e,{followLoading:!1})})),b((function(){return n.shared})));case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(a.env.apiUrl,"/user/profile"),{body:JSON.stringify({jwtToken:localStorage.getItem("jwtToken")||"",username:o}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,200===t.status&&(d((function(e){return me({},e,{pageLoading:!1})})),b((function(){return r.shared})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o&&function(){e.apply(this,arguments)}()}),[a.env.apiUrl,a.shared.username,o]),n.a.createElement("div",{className:"profile"},!O&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,j&&n.a.createElement("img",{src:a.env.imgUrl+j,className:"profile--avatar",alt:k}),n.a.createElement("br",null),n.a.createElement("h1",{className:"profile--name"},k),n.a.createElement("h2",{className:"profile--username"},"@",o),n.a.createElement("p",{className:"profile--bio"},S),n.a.createElement("p",{className:"profile--followers"},n.a.createElement("b",null,D)," Followers"),n.a.createElement("p",{className:"profile--following"},n.a.createElement("b",null,M)," Following"),n.a.createElement("br",null),T&&n.a.createElement("p",{className:"profile--country"},l[T]),I&&n.a.createElement("p",{className:"profile--website"},n.a.createElement("a",{href:I,target:"_blank",rel:"noopener noreferrer"},I.replace(/(^\w+:|^)\/\//,"")))),n.a.createElement("div",null,n.a.createElement("div",{className:"profile--header"},n.a.createElement(ce,{isMe:A,placeholder:a.env.imgUrl+P,resizeTo:900,signedUrl:"".concat(a.env.apiUrl,"/upload/signed-url"),saveImg:"".concat(a.env.apiUrl,"/my/cover")}),n.a.createElement("div",{className:"profile--nav"},n.a.createElement("div",null,n.a.createElement("button",{className:"profile--button"},"Items"),n.a.createElement("button",{className:"profile--button"},"Games")),n.a.createElement("div",null,A&&n.a.createElement("button",{className:"profile--button",onClick:function(){e.history.push("/my/profile")}},"Edit Profile"),!A&&N&&n.a.createElement("button",{className:"profile--follow",onClick:function(){a.shared.loggedIn?h||x("follow"):t({type:y,value:"login"})}},h?n.a.createElement("img",{src:C.a,alt:"loading",className:"loading"}):n.a.createElement("span",{className:"profile--followIcon"},"+ Follow")),!A&&!N&&n.a.createElement("button",{className:"profile--follow",onClick:function(){a.shared.loggedIn?h||x("unfollow"):t({type:y,value:"login"})}},h?n.a.createElement("img",{src:C.a,alt:"loading",className:"loading"}):n.a.createElement("span",{className:"profile--unfollowIcon"},"X Unfollow"))))))))};function de(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function fe(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?de(t,!0).forEach((function(a){Object(d.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):de(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var Ee=function(e){var a=Object(r.useContext)(v).dispatch,t=Object(r.useState)({imageURL:e.placeholder}),o=Object(i.a)(t,2),l=o[0],c=o[1],s=l.imageURL,u=function(){var t=Object(p.a)(m.a.mark((function t(r){var n,o,l,i,c,s,u;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.signedUrl,{body:JSON.stringify({jwtToken:localStorage.getItem("jwtToken")}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});case 2:return n=t.sent,t.next=5,n.json();case 5:if(o=t.sent,200!==n.status){t.next=20;break}return l=o.signedUrl,t.next=10,fetch(l,{body:r,headers:{Accept:"application/json","Content-Type":"image/jpeg"},method:"PUT"});case 10:if(200!==(i=t.sent).status){t.next=20;break}return c="".concat(i.url.split("/")[4],"/").concat(i.url.split("/")[5].split("?")[0]),t.next=15,fetch(e.saveImg,{body:JSON.stringify({avatarId:c,jwtToken:localStorage.getItem("jwtToken")}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});case 15:return s=t.sent,t.next=18,s.json();case 18:u=t.sent,a({type:O,value:u.shared});case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(e){if(-1===e.indexOf(";base64,")){var a=e.split(","),t=a[0].split(":")[1],r=a[1];return new Blob([r],{type:t})}for(var n=e.split(";base64,"),o=n[0].split(":")[1],l=window.atob(n[1]),i=l.length,c=new Uint8Array(i),s=0;s<i;++s)c[s]=l.charCodeAt(s);return new Blob([c],{type:o})};return n.a.createElement("div",{className:"photo"},n.a.createElement("label",null,n.a.createElement("img",{alt:"your first name initial",className:"photo--preview",src:s}),n.a.createElement("input",{accept:"image/png, image/jpeg",id:"photo",name:"photo",onChange:function(a){if(a.currentTarget.files){var t=a.currentTarget.files[0],r=new FileReader;r.onload=function(a){var r=new Image;r.onload=function(){var a=Object(p.a)(m.a.mark((function a(t){var n,o,l,i,s,p,f;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=document.createElement("canvas"),o=e.resizeTo,n.width=o,n.height=o,(l=n.getContext("2d")).imageSmoothingEnabled=!1,i=r.width,s=r.height,i>s&&i>o?(i*=o/s,s=o):s>o&&(s*=o/i,i=o),l.drawImage(r,0,0,i,s),p=n.toDataURL("image/jpeg"),c((function(e){return fe({},e,{imageURL:p,height:s,width:i})})),f=d(p),u(f);case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),r.src=URL.createObjectURL(t)},r&&r.readAsDataURL(t)}},type:"file"})))},ge={zhhans:{0:"\u6708",1:"\u4e00\u6708",2:"\u4e8c\u6708",3:"\u6e38\u884c",4:"\u56db\u6708",5:"\u53ef\u4ee5",6:"\u516d\u6708",7:"\u4e03\u6708",8:"\u516b\u6708",9:"\u4e5d\u6708",10:"\u5341\u6708",11:"\u5341\u4e00\u6708",12:"\u5341\u4e8c\u6708"},en:{0:"Month",1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}};function ve(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function be(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?ve(t,!0).forEach((function(a){Object(d.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ve(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var he=function(){var e,a=Object(r.useContext)(w).global,t=Object(r.useContext)(v).dispatch,o=se[a.shared.language],l=ge[a.shared.language],c=a.shared.dob?new Date(a.shared.dob):new Date("0-0-0"),s=c.getDate()||0,u=c.getMonth()+1||0,f=c.getFullYear()||0;if(a.shared.avatarId)e=a.env.imgUrl+a.shared.avatarId;else{var E=a.shared.fullName.split(" ")[0].charAt(0).toLowerCase();e=a.env.imgUrl+"initials/".concat(E,".png")}var g=Object(r.useState)({apiError:"",bio:a.shared.bio||"",bioError:"",country:a.shared.country,day:s.toString(),dobError:"",email:a.shared.email,emailError:"",fullName:a.shared.fullName,fullNameError:"",gender:a.shared.gender||"other",loading:!1,month:u.toString(),username:a.shared.username||"",usernameError:"",webSite:a.shared.webSite||"",webSiteError:"",year:f.toString()}),b=Object(i.a)(g,2),h=b[0],y=b[1],j=h.apiError,S=h.bio,N=h.bioError,P=h.country,k=h.day,A=h.dobError,I=h.email,D=h.emailError,M=h.fullName,x=h.fullNameError,B=h.gender,L=h.loading,U=h.month,R=h.username,G=h.usernameError,F=h.webSite,K=h.webSiteError,J=h.year,H=function(e){e.persist();var a=e.target,t=a.id,r=a.name,n=a.value,o=a.type;"fullName"===r&&x&&V("fullName"),"webSite"===r&&K&&V("webSite"),"bio"===r&&N&&V("bio"),"email"===r&&D&&V("email"),y("radio"===o?function(e){return be({},e,{gender:t})}:function(e){return be({},e,Object(d.a)({},r,n))})},Z=function(){var e=Object(p.a)(m.a.mark((function e(r){var n,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y((function(e){return be({},e,{loading:!0})})),n=r.email!==a.shared.email,e.next=4,fetch("".concat(a.env.apiUrl,"/my/profile"),{body:JSON.stringify({bio:r.bio,country:r.country||"",day:r.day,email:r.email,emailChanged:n,fullName:r.fullName,gender:r.gender,jwtToken:localStorage.getItem("jwtToken"),month:r.month,webSite:r.webSite||"",year:r.year}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});case 4:return o=e.sent,e.next=7,o.json();case 7:l=e.sent,y((function(e){return be({},e,{loading:!1})})),200===o.status?(localStorage.setItem("jwtToken",l.jwtToken),t({type:O,value:l.shared})):y((function(e){return be({},e,{apiError:l.error})}));case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),z=function(e){V(e.target.name)},V=function(e){return"fullName"===e?/^.{2,}$/.test(M)?(y((function(e){return be({},e,{fullNameError:""})})),!0):(y((function(e){return be({},e,{fullNameError:"2 charectors or longer"})})),!1):"webSite"===e?F&&F.length>0&&!/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/.test(F)?(y((function(e){return be({},e,{webSiteError:"Must start with http:// or https://"})})),!1):(y((function(e){return be({},e,{webSiteError:""})})),!0):"bio"===e?S&&S.length>0&&S.length>256?(y((function(e){return be({},e,{bioError:"Must be less than 256 charectors"})})),!1):(y((function(e){return be({},e,{bioError:""})})),!0):"email"===e?/\S+@\S+\.\S+/.test(I)?(y((function(e){return be({},e,{emailError:""})})),!0):(y((function(e){return be({},e,{emailError:"A valid email address is required."})})),!1):void 0};return n.a.createElement("span",{className:"page"},n.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=V("fullName"),t=V("webSite"),r=V("bio"),n=V("email");a&&t&&r&&n&&Z({bio:h.bio,country:h.country,day:h.day,email:h.email,fullName:h.fullName,gender:h.gender,month:h.month,webSite:h.webSite,year:h.year})},className:"form"},n.a.createElement("h4",{className:"form--title"},"Edit Profile"),n.a.createElement("div",{className:"form--body"},n.a.createElement("div",null,"Profile"),n.a.createElement("div",{className:"form--relative"},j&&n.a.createElement("div",{className:"error--api"},j),n.a.createElement("label",null,"Photo"),n.a.createElement(Ee,{placeholder:e,resizeTo:180,signedUrl:"".concat(a.env.apiUrl,"/upload/signed-url"),saveImg:"".concat(a.env.apiUrl,"/my/avatar")}),n.a.createElement("label",null,"Full Name",n.a.createElement("input",{autoFocus:!0,className:x&&"form--error",maxLength:70,name:"fullName",onBlur:z,onChange:H,type:"text",value:M}),n.a.createElement(T,{error:x})),n.a.createElement("small",null,"Your real name, so your friends can find you."),n.a.createElement("label",null,"Username",n.a.createElement("input",{disabled:!0,name:"username",onChange:H,type:"text",value:R}),n.a.createElement(T,{error:G})),n.a.createElement("small",null,"https://dicky.world/",R),n.a.createElement("label",null,"Website",n.a.createElement("input",{className:K&&"form--error",name:"webSite",onBlur:z,onChange:H,placeholder:"https://www.",type:"text",value:F}),n.a.createElement(T,{error:K})),n.a.createElement("label",null,"Country",n.a.createElement("select",{name:"country",value:P,onChange:H},n.a.createElement("option",{key:"",value:""},"Select..."),Object.entries(o).map((function(e){var a=Object(i.a)(e,2),t=a[0],r=a[1];return n.a.createElement("option",{key:t,value:t},r)})))),n.a.createElement("label",null,"Bio",n.a.createElement("textarea",{className:N&&"form--error",name:"bio",onChange:H,value:S}),n.a.createElement(T,{error:N})))),n.a.createElement("div",{className:"form--body"},n.a.createElement("div",null,"Account"),n.a.createElement("div",null,n.a.createElement("label",null,"Email Address",n.a.createElement("input",{className:D&&"form--error",id:"email",name:"email",onBlur:z,onChange:H,type:"text",value:I}),n.a.createElement(T,{error:D})),n.a.createElement("small",null,"Email will not be publicly displayed."),n.a.createElement("label",null,"Birthday"),n.a.createElement("select",{className:"form--dob-year",name:"year",onChange:H,value:J},n.a.createElement("option",{value:"0"},"Year"),function(){for(var e=[],a=(new Date).getFullYear();a>=1900;a--)e.push(n.a.createElement("option",{value:a},a));return e}()),n.a.createElement("select",{className:"form--dob-month",name:"month",onChange:H,value:U},Object.entries(l).map((function(e){var a=Object(i.a)(e,2),t=a[0],r=a[1];return n.a.createElement("option",{key:t,value:t},r)}))),n.a.createElement("select",{className:"form--dob-day ".concat(A&&"form--error"),name:"day",onChange:H,value:k},n.a.createElement("option",{value:"0"},"Day"),function(){for(var e=[],a=1;a<=31;a++)e.push(n.a.createElement("option",{value:a},a));return e}()),n.a.createElement("label",null,"Gender"),n.a.createElement("label",{className:"form--radio-label"},n.a.createElement("input",{checked:"male"===B,id:"male",name:"gender",onChange:H,type:"radio"}),n.a.createElement("span",null,"Male")),n.a.createElement("label",{className:"form--radio-label"},n.a.createElement("input",{checked:"female"===B,id:"female",name:"gender",onChange:H,type:"radio"}),n.a.createElement("span",null,"Female")),n.a.createElement("label",{className:"form--radio-label"},n.a.createElement("input",{checked:"other"===B,id:"other",name:"gender",onChange:H,type:"radio"}),n.a.createElement("span",null,"Other")))),n.a.createElement("div",{className:"form--footer"},n.a.createElement("small",null),n.a.createElement("div",null,n.a.createElement("button",{color:"primary"},L?n.a.createElement("img",{src:C.a,alt:"loading",className:"loading"}):"Save Changes")))))},we=function(){return n.a.createElement("div",null,"notFound")},ye=function(e){var a=Object(r.useContext)(v).dispatch,t=e.match.params.resetPassword;return localStorage.setItem("resetCode",t),Object(r.useEffect)((function(){a({type:y,value:"resetpassword"})}),[a]),n.a.createElement("div",{className:"page"})};t(38),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement((function(){var e=Object(r.useReducer)(j,h),a=Object(i.a)(e,2),t=a[0],o=a[1];return n.a.createElement(v.Provider,{value:{dispatch:o}},n.a.createElement(w.Provider,{value:{global:t}},n.a.createElement(c.a,null,n.a.createElement(s.a,{render:function(e){var a=e.location;return n.a.createElement($,{location:a},n.a.createElement(s.c,{location:a},n.a.createElement(s.a,{exact:!0,path:"/",component:X}),n.a.createElement(s.a,{exact:!0,path:"/my/profile",component:he}),n.a.createElement(s.a,{exact:!0,path:"/my/password",component:te}),n.a.createElement(s.a,{exact:!0,path:"/my/preferences",component:oe}),n.a.createElement(s.a,{exact:!0,path:"/confirm-email/:confirmationCode",component:q}),n.a.createElement(s.a,{exact:!0,path:"/reset-password/:resetPassword",component:ye}),n.a.createElement(s.a,{exact:!0,path:"/:username",component:pe}),n.a.createElement(s.a,{component:we})))}}))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},6:function(e,a,t){e.exports=t.p+"static/media/loading.6a19979e.svg"}},[[24,1,2]]]);
//# sourceMappingURL=main.420dc53e.chunk.js.map